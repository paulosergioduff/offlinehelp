(function(a){a.fn.ticker=function(e){var f=a.extend({},a.fn.ticker.defaults,e),c="#"+a(this).attr("id"),b=a(this).attr("tagName");return this.each(function(){function t(i){var h=0,g;for(g in i){i.hasOwnProperty(g)&&h++}return h}function s(g){if(f.debugMode){window.console&&window.console.log?window.console.log(g):alert(g)}}function r(){if(u.contentLoaded==false){if(f.ajaxFeed){s("Code Me!")}else{if(f.htmlFeed){if(a(c+" LI").length>0){a(c+" LI").each(function(g){u.newsArr["item-"+g]={type:f.titleText,content:a(this).html()}})}else{s("Couldn't find any content for the ticker to use!");return false}}else{s("Couldn't find any content for the ticker to use!");return false}}u.contentLoaded=true}a(u.dom.titleElem).html(u.newsArr["item-"+u.position].type);a(u.dom.contentID).html(u.newsArr["item-"+u.position].content);if(u.position==t(u.newsArr)-1){u.position=0}else{u.position++}distance=a(u.dom.contentID).width();time=distance/f.speed;a(u.dom.wrapperID).find(u.dom.titleID).fadeIn().end().find(u.dom.titleElem).fadeIn("slow",d)}function d(){if(u.play){var g=a(u.dom.titleElem).width()+20;a(u.dom.revealID).css("left",g+"px");if(f.displayType=="fade"){a(u.dom.revealID).hide(0,function(){a(u.dom.contentID).css("left",g+"px").delay(20).fadeIn("slow",p)})}else{f.displayType!="scroll"&&a(u.dom.revealElem).show(0,function(){a(u.dom.contentID).css("left",g+"px").show();a(u.dom.revealID).css("margin-left","0px").delay(20).animate({marginLeft:distance+"px"},time,"linear",p)})}}else{return false}}function p(){if(u.play){a(u.dom.contentID).delay(f.pauseOnItems).fadeOut("slow");f.displayType=="fade"?a(u.dom.contentID).fadeOut(f.fadeOutSpeed,function(){a(u.dom.wrapperID).find(u.dom.revealElem+","+u.dom.contentID).hide().end().find(u.dom.tickerID+","+u.dom.revealID+","+u.dom.titleID).show().end().find(u.dom.tickerID+","+u.dom.revealID+","+u.dom.titleID).removeAttr("style");r()}):a(u.dom.revealID).hide(0,function(){a(u.dom.tickerID).delay(f.pauseOnItems).fadeOut(f.fadeOutSpeed,function(){a(u.dom.wrapperID).find(u.dom.titleElem+","+u.dom.revealElem+","+u.dom.contentID).hide().end().find(u.dom.tickerID+","+u.dom.revealID+","+u.dom.titleID).show().end().find(u.dom.tickerID+","+u.dom.revealID+","+u.dom.titleID).removeAttr("style");r()})})}else{a(u.dom.revealElem).hide()}}function m(){u.play=false;a(u.dom.tickerID+","+u.dom.revealID+","+u.dom.titleID+","+u.dom.titleElem+","+u.dom.revealElem+","+u.dom.contentID).stop(true,true);a(u.dom.revealID+","+u.dom.revealElem).hide();a(u.dom.wrapperID).find(u.dom.titleID+","+u.dom.titleElem).show().end().find(u.dom.contentID).show()}function l(){u.play=true;u.paused=false;p()}function k(g){m();switch(g){case"prev":if(u.position==0){u.position=t(u.newsArr)-2}else{if(u.position==1){u.position=t(u.newsArr)-1}else{u.position-=2}}a(u.dom.titleElem).html(u.newsArr["item-"+u.position].type);a(u.dom.contentID).html(u.newsArr["item-"+u.position].content);break;case"next":a(u.dom.titleElem).html(u.newsArr["item-"+u.position].type);a(u.dom.contentID).html(u.newsArr["item-"+u.position].content)}if(u.position==t(u.newsArr)-1){u.position=0}else{u.position++}}var u={position:0,time:0,distance:0,newsArr:{},play:true,paused:false,contentLoaded:false,dom:{contentID:"#ticker-content",titleID:"#ticker-title",titleElem:"#ticker-title SPAN",tickerID:"#ticker",wrapperID:"#ticker-wrapper",revealID:"#ticker-swipe",revealElem:"#ticker-swipe SPAN",controlsID:"#ticker-controls",prevID:"#prev",nextID:"#next",playPauseID:"#play-pause"}};if(b!="UL"&&f.htmlFeed===true){s("Cannot use <"+b.toLowerCase()+"> type of element for this plugin - must of type <ul>");return false}(function(){a(u.dom.wrapperID).append('<div id="'+u.dom.tickerID.replace("#","")+'"><div id="'+u.dom.titleID.replace("#","")+'"><span style="display: none;"><!-- --></span></div><p id="'+u.dom.contentID.replace("#","")+'"></p><div id="'+u.dom.revealID.replace("#","")+'"><span style="display: none;"><!-- --></span></div></div>');a(u.dom.wrapperID).removeClass("no-js").addClass("has-js");a(u.dom.tickerElem+","+u.dom.titleElem+","+u.dom.contentID).hide();if(f.controls){a(u.dom.controlsID).live("click mouseover mousedown mouseout mouseup",function(h){var g=h.target.id;if(h.type=="click"){switch(g){case u.dom.prevID.replace("#",""):u.paused=true;a(u.dom.playPauseID).addClass("paused");k(g);break;case u.dom.nextID.replace("#",""):u.paused=true;a(u.dom.playPauseID).addClass("paused");k(g);break;case u.dom.playPauseID.replace("#",""):if(u.play==true){u.paused=true;a(u.dom.playPauseID).addClass("paused");m()}else{u.paused=false;a(u.dom.playPauseID).removeClass("paused");l()}}}else{if(h.type=="mouseover"&&a("#"+g).hasClass("controls")){a("#"+g).addClass("over")}else{if(h.type=="mousedown"&&a("#"+g).hasClass("controls")){a("#"+g).addClass("down")}else{if(h.type=="mouseup"&&a("#"+g).hasClass("controls")){a("#"+g).removeClass("down")}else{h.type=="mouseout"&&a("#"+g).hasClass("controls")&&a("#"+g).removeClass("over")}}}}});a(u.dom.wrapperID).append('<ul id="'+u.dom.controlsID.replace("#","")+'"><li id="'+u.dom.playPauseID.replace("#","")+'" class="controls"></li><li id="'+u.dom.prevID.replace("#","")+'" class="controls"></li><li id="'+u.dom.nextID.replace("#","")+'" class="controls"></li></ul>')}a(u.dom.contentID).mouseover(function(){u.paused==false&&m()}).mouseout(function(){u.paused==false&&l()});r()})()})};a.fn.ticker.defaults={speed:0.1,ajaxFeed:false,displayType:"reveal",htmlFeed:true,debugMode:true,controls:true,titleText:"Latest",pauseOnItems:3000,fadeInSpeed:300,fadeOutSpeed:300}})(jQuery);