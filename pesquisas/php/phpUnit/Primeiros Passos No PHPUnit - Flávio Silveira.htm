<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!-->
<html class="js video maskImage placeholder" lang="en"><!--<![endif]--><!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]--><!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]--><!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><!--<![endif]--><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <title>Primeiros Passos No PHPUnit - Flávio Silveira</title>
  <meta name="author" content="Flávio Silveira">

  
  <meta name="description" content="Primeiros Passos No PHPUnit Categorias: desenvolvimento, php Fala pessoal! Hoje vamos cobrir os primeiros passos de uma ferramenta super importante …">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

  
  <link rel="canonical" href="http://flaviosilveira.com/2012/primeiros-passos-no-phpunit">
  <link href="http://flaviosilveira.com/favicon.png" rel="icon">
  <link href="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/flaviosilveira" rel="alternate" title="Flávio Silveira" type="application/atom+xml">
  <script type="text/javascript" async="" src="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/ga.js"></script><script src="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/modernizr-2.js"></script>
  <script src="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/jquery.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/octopress.js" type="text/javascript"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-2775631-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


<script type="text/javascript" async="" src="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/embed.js"></script><script type="text/javascript" async="" src="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/embed.js"></script><link rel="prefetch" as="style" href="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/a_data/lounge.css"><link rel="prefetch" as="script" href="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/a_data/common.js"><link rel="prefetch" as="script" href="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/a_data/lounge_002.js"><link rel="prefetch" as="script" href="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/a_data/config.js"><link rel="prefetch" as="style" href="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/a_data/lounge.css"><link rel="prefetch" as="script" href="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/a_data/common.js"><link rel="prefetch" as="script" href="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/a_data/lounge_002.js"><link rel="prefetch" as="script" href="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/a_data/config.js"><script src="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/alfalfa.js" async="" charset="UTF-8"></script></head>

  <body>
    <a href="http://flaviosilveira.com/" class="home-icon">
      <img src="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/home.png">
    </a>

    <article role="article" class="full-single-article">
  <div class="container">
    <div class="row">
      <div class="col-md-8 col-md-offset-2">
        <h1>Primeiros Passos No PHPUnit</h1>
        <div class="meta">
          








  



<time datetime="2012-10-14T00:00:00+00:00" pubdate="" data-updated="true"></time>
          

Categorias: 
<span class="categories">
  
    <a class="category" href="http://flaviosilveira.com/blog/categories/desenvolvimento/">desenvolvimento</a>, <a class="category" href="http://flaviosilveira.com/blog/categories/php/">php</a>
  
</span>


        </div>
        <p>Fala pessoal!</p>




<p>Hoje vamos cobrir os primeiros passos de uma ferramenta super 
importante para quem quer avançar no desenvolvimento PHP, o PHPUnit. Não
 vamos passar aqui pela instalação e configuração dele, sendo que já 
temos vários artigos sobre isso internet a fora seja lá qual for seu 
sistema operacional. Eu estarei demonstrando os exemplos aqui no Mac OS X
 mas você pode seguir normalmente no seu sistema.</p>




<p>Para quem não sabe PHPUnit é um framework que nos ajuda a desenvolver
 testes unitários em PHP. Esse unitário se refere literalmente a 
unidade, pequenas partes. Logo, testes unitários são testes para 
pequenas partes de código. No objetivo geral, testando cada unidade 
vamos saber se toda nossa aplicação está funcionando corretamente, e se 
não está, qual parte (unidade) está falhando. Pense em um portal onde 
uma equipe grande trabalha e tem várias alterações de código diariamente
 para melhorias e correções. Os testes tem que estar sempre ok antes de 
algo ir para o ar, uma maneira rápida certeira de conferir se nada foi 
quebrado no código.</p>




<!--more-->




<p>Após instalar e configurar o PHPUnit a primeira coisa a fazer é testar se está tudo ok.<br>
Para isso vá até o seu console e digite o comando <em>phpunit</em>.<br>
A saída esperada é um helper como na imagem abaixo:<br>
<img class="alignleft size-full wp-image-562" title="phpunit 1" src="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/Imagem1.png" alt="testando phpunit" width="487" height="214"><br style="clear: both;"></p>




<p>Caso você tenha problemas é hora de checar a sua instalação.<br>
Se você usa sistema unix e instalou o PHPUnit via PEAR aqui vão algumas dicas para tentar resolver isso:</p>




<ul>
<li>Pode ser que esteja tudo instalado corretamente, mas o console não 
esteja localizando o comando do PHPUnit. Para resolver isso primeiro 
verifique se a PEAR está instalada tentando digitar o comando <em>pear</em>. Se sim, entre com o comando <em>pear config-get bin_dir</em> para saber o diretório do bin do PHPUnit. Confira se a saída está no seu PATH de comandos, com o comando <em>echo $PATH</em>. Caso não esteja use o comando <em>export</em> para adicionar esse caminho.</li>
<li>Se você tem certeza que o PEAR está instalado corretamente, execute o seguinte comando para reinstalar o PHPUnit <em>pear install –alldeps –force phpunit/PHPUnit</em>.</li>
</ul>




<p>Com tudo ok podemos seguir em frente.<br>
Daqui em diante conto que você saiba pelo menos um mínimo de Orientação a Objetos para que acompanhe os exemplos abaixo.<br>
Para que a gente entenda o que esperar do PHPUnit, vamos primeiro criar uma classe com pelo menos um atributo e seus métodos <em>get()</em> e <em>set()</em>.<br>
Que tal a tradicional classe Carro com uma propiedade de cor?</p>




<pre class="brush: php; title: ; notranslate" title="">/**
 * Classe Carro
 *
 **/
class Carro
{
    private $_cor;

    public function getCor()
    {
        return $this-&gt;_cor;
    }

    public function setCor($cor)
    {
        $this-&gt;_cor = $cor;
    }

}
</pre>




<p>Com a classe principal criada vamos agora preparar nossa classe de testes.<br>
Vamos chamar nossa classe de testes de CarroTeste.php.</p>




<pre class="brush: php; title: ; notranslate" title="">require_once "Carro.php";

/**
 * Classe Carro Teste
 **/
class CarroTeste extends PHPUnit_Framework_Testcase
{

}
</pre>




<p>Repare em duas coisas no código acima:</p>




<ul>
<li>Sua classe de testes deve conhecer a classe que vai ser testada (use require, include ou autoload).</li>
<li>Sua classe de testes precisa extender o framework PHP_Unit. Para 
extender o PHPUnit da mesma forma como no código acima, configure 
corretamente o seu <em>include_path</em> no seu arquivo de configuração do PHP (php.ini). Não sabe onde está seu arquivo php.ini? Utilize o comando <em>php –ini</em>. Procure por <em>include_path</em> dentro desse arquivo e adicione o caminho para o framework PHPUnit. <em>**A instalação via PEAR constuma adicionar esse caminho para você no php.ini. Confira o arquivo se for caso.</em></li>
</ul>




<p>Finalmente vamos ao nosso teste em si. Vamos testar se nossos métodos <em>get()</em> e <em>set()</em> estão realmente fazendo o que se espera. <em>Get()</em> tem de retornar o mesmo valor passado para <em>set()</em>. Para verificar isso vamos usar o método assertEquals do PHPUnit, veja o exemplo:</p>




<pre class="brush: php; title: ; notranslate" title="">require_once "Carro.php";

/**
 * Classe Carro Teste
 **/
class CarroTeste extends PHPUnit_Framework_Testcase
{
    public function testeCor()
    {
        $carro = new Carro();
        $carro-&gt;setCor("Azul");

        $this-&gt;assertEquals("Azul", $carro-&gt;getCor());
    }
}
</pre>




<p>Criamos um método testeCor em nossa classe de testes.<br>
Dentro dele instanciamos a classe carro e atribuímos para a propiedade cor o valor Azul.<br>
O método AssertEquals do PHPUnit vai comparar se os dois parâmetros passados são iguais.</p>




<p>Vamos rodar nosso teste?<br>
Em seu console execute o comando phpunit passando para ele o caminho da 
sua classe de testes. O resultado deve ser similar a esse:<br>
<img class="alignleft size-full wp-image-563" title="Imagem2" src="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/Imagem2.png" alt="Rodando o primeiro teste" width="442" height="171"><br style="clear: both;"></p>




<p>Na imagem você percebe abaixo da linha de descrição da versão do 
PHPUnit um . (ponto). Em seguida uma descrição do tempo de execução e 
memória utilizada e abaixo um OK. Isso indica que nosso teste teve 
sucesso. O ponto que falamos acima indica que um teste teve sucesso, em 
caso de falha teremos um F no lugar do ponto. Para cada teste irá ser 
adicionado um <em>. ponto</em>ou um <em>F</em>.</p>




<p>Vamos forçar um erro no teste para ver o que acontece? Vamos trocar os parâmetros do nosso <em>AssertEquals</em> e dizer que estamos esperando o resultado <em>Amarelo</em> invés de <em>Azul</em>.</p>




<pre class="brush: php; title: ; notranslate" title="">require_once "Carro.php";

/**
 * Classe Carro Teste
 **/
class CarroTeste extends PHPUnit_Framework_Testcase
{
    public function testeCor()
    {
        $carro = new Carro();
        $carro-&gt;setCor("Azul");

        $this-&gt;assertEquals("Amarelo", $carro-&gt;getCor());
    }
}
</pre>




<p>Rodando nosso teste agora temos a seguinte saída:<br>
<img class="alignleft size-full wp-image-564" title="Imagem3" src="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/Imagem3.png" alt="Falha no PHPUnit" width="427" height="317"><br style="clear: both;"><br>
No lugar do ponto anterior que indicava sucesso, temos agora um <em>F</em>
 indicando a falha. Junto a isso o PHPUnit nos traz detalhes da falha 
com o nome do teste que falhou, o que era esperado e o que foi 
retornado.</p>




<p>A ideia por trás do PHPUnit e suas funções é bem similar ao que foi 
demonstrado acima, com o detalhe que algumas funções podem ter mais 
parâmetros ou esperar tipos diferentes de dados. Que tal descobrir mais 
métodos do PHPUnit e criar novos testes? Visite o capítulo 4 do manual 
do PHPUnit e teste outras funções do framework. Segue o link para o 
manual: <a href="http://www.phpunit.de/manual/current/en/writing-tests-for-phpunit.html" title="PHPUnit Manual Cap4">http://www.phpunit.de/manual/current/en/writing-tests-for-phpunit.html</a>.</p>




<p>Grande Abraço!</p>



        <hr class="divider-short">

        
        <section>
          <h1>Comments</h1>
          <div id="disqus_thread" aria-live="polite"><iframe id="dsq-app9331" name="dsq-app9331" allowtransparency="true" scrolling="no" tabindex="0" title="Disqus" style="width: 1px !important; min-width: 100% !important; border: medium none !important; overflow: hidden !important; height: 1297px !important;" src="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/a.htm" horizontalscrolling="no" verticalscrolling="no" width="100%" frameborder="0"></iframe></div>
        </section>
        
      </div>
    </div>
  </div>
</article>

<hr class="divider-short">

<div class="archive-link">
  <div class="container">
    <div class="row">
      <div class="col-md-8 col-md-offset-2">
        
          <a class="pull-left" href="http://flaviosilveira.com/2012/global-game-jam-2012/" title="Previous Post: Global Game Jam 2012">« Anterior: Global Game Jam 2012</a>
        

        
          <a class="pull-right" href="http://flaviosilveira.com/2012/hangout-php-in-rio/" title="Next Post: Hangout PHP in Rio">Próximo: Hangout PHP in Rio »</a>
        
      </div>
    </div>
  </div>
</div>

    <footer id="footer" class="her-row">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
  <a href="http://flaviosilveira.com/"><h4>Home</h4></a>
</div>

<div class="col-md-2">
  <div class="social-icon-list">
    
    <a href="https://twitter.com/flaviosilveira"><img src="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/glyphicons_social_31_twitter.png"></a>
    

    
    <a href="https://github.com/flaviosilveira"><img src="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/glyphicons_social_21_github.png"></a>
    

    
    <a href="https://linkedin.com/in/flaviosilveira"><img src="Primeiros%20Passos%20No%20PHPUnit%20-%20Fl%C3%A1vio%20Silveira_arquivos/glyphicons_social_17_linked_in.png"></a>
    

    
  </div>
</div>

<div class="pull-right">
  <h4>Powered by <a href="http://octopress.org/">Octopress</a>. Designed by <a href="http://adrianartiles.com/">Adrian Artiles</a>.</h4>
</div>


    </div>
  </div>
</footer>

    
      

<script type="text/javascript">
      var disqus_shortname = 'flaviosilveira';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://flaviosilveira.com/2012/primeiros-passos-no-phpunit/';
        var disqus_url = 'http://flaviosilveira.com/2012/primeiros-passos-no-phpunit/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


    
  

<iframe style="display: none;"></iframe></body></html>